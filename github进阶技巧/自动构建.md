# 自动集成

https://docs.github.com/zh/actions

github提供云端的自动集成配置。

自动构建build ，自动测试test，自动部署server update，容器镜像mirror，发布Packages，项目管理wike。

## 快速入门

1.首先创建一个github仓库，并拉取到本地。（其实可以在线操作。。。）

```
$ git clone git@github.com:LeroyK111/gitAutoCommit.git
```

2.创建工作流文件夹

创建 gitAutoCommit/.github/workflows 文件夹，写入一个 github-actions-demo.yml 配置文件。

![image-20230129152634709](%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA.assets/image-20230129152634709.png)

### **简单案例**

写完后，记得提交测试一下。

```
# 工作流名称
name: GitHub Actions Demo
# 工作流运行名称
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
# 监听事件（必须）
on: [push]
# 作业细节
jobs:
  # 定义一个作业名称
  Explore-GitHub-Actions:
    # 设置运行环境
    runs-on: ubuntu-latest
    # linux指令步骤
    steps:
    # run: shell指令。。。
      - run: echo "🎉 The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "🐧 This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "🔎 The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
     # 给下一行操作起个名字
      - name: Check out repository code
     # uses: 签出操作，很重要。如果你要执行存储库的脚本or修改内容
        uses: actions/checkout@v3
      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "🖥️ The workflow is now ready to test your code on the runner."
     # 给下一行操作起个名字
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "🍏 This job's status is ${{ job.status }}."
```

event事件机制：

![工作流概述](%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA.assets/overview-actions-simple.png)



### 工作流workflows

工作流程是一个可配置的自动化过程，它将运行一个或多个作业。 工作流程由签入到存储库的 YAML 文件定义，并在存储库中的事件触发时运行，也可以手动触发，或按定义的时间表触发。

工作流程在存储库的 `.github/workflows` 目录中定义，存储库可以有多个工作流程，每个工作流程都可以执行不同的任务集。 例如，您可以有一个工作流程来构建和测试拉取请求，另一个工作流程用于在每次创建发布时部署应用程序，还有一个工作流程在每次有人打开新议题时添加标签。

可在一个工作流中引用另一个工作流，详见“[重用工作流](https://docs.github.com/zh/actions/learn-github-actions/reusing-workflows)”。

有关工作流的详细信息，请参阅“[使用工作流](https://docs.github.com/zh/actions/using-workflows)”。











### 事件Event

事件是存储库中触发工作流程运行的特定活动。 例如，当有人创建拉取请求、打开议题或将提交推送到存储库时，活动可能源自 GitHub。 还可通过[发布到 REST API](https://docs.github.com/zh/rest/reference/repos#create-a-repository-dispatch-event) 触发按计划运行的工作流，或者手动触发。

有关可用于触发工作流的事件的完整列表，请参阅[触发工作流的事件](https://docs.github.com/zh/actions/reference/events-that-trigger-workflows)。



### 作业shell

作业是工作流中在同一运行器上执行的一组步骤。 每个步骤要么是一个将要执行的 shell 脚本，要么是一个将要运行的动作。 步骤按顺序执行，并且相互依赖。 由于每个步骤都在同一运行器上执行，因此您可以将数据从一个步骤共享到另一个步骤。 例如，可以有一个生成应用程序的步骤，后跟一个测试已生成应用程序的步骤。

您可以配置作业与其他作业的依赖关系；默认情况下，作业没有依赖关系，并且彼此并行运行。 当一个作业依赖于另一个作业时，它将等待从属作业完成，然后才能运行。 例如，对于没有依赖关系的不同体系结构，您可能有多个生成作业，以及一个依赖于这些作业的打包作业。 生成作业将并行运行，当它们全部成功完成后，打包作业将运行。

有关作业的详细信息，请参阅“[使用作业](https://docs.github.com/zh/actions/using-jobs)”。



### 操作

操作是用于 GitHub Actions 平台的自定义应用程序，它执行复杂但经常重复的任务。 使用操作可帮助减少在工作流程文件中编写的重复代码量。 操作可以从 GitHub 拉取 git 存储库，为您的构建环境设置正确的工具链，或设置对云提供商的身份验证。

您可以编写自己的操作，也可以在 GitHub Marketplace 中找到要在工作流程中使用的操作。

有关详细信息，请参阅“[创建操作](https://docs.github.com/zh/actions/creating-actions)”。



### 运行程序

运行程序是触发工作流时运行工作流的服务器。 每个运行器一次可以运行一个作业。 GitHub 提供 Ubuntu Linux、Microsoft Windows 和 macOS 运行器来运行您的工作流程；每个工作流程运行都在新预配的全新虚拟机中执行。 GitHub 还提供 larger runner（适用于大型配置）。 有关详细信息，请参阅“[使用 larger runner](https://docs.github.com/zh/actions/using-github-hosted-runners/using-larger-runners)”。 如果需要其他操作系统或特定硬件配置，可托管自己的运行器。有关自托管运行器的详细信息，请参阅“[托管自己的运行器](https://docs.github.com/zh/actions/hosting-your-own-runners)”。





## 进阶使用









## 其他功能

平台迁移Actions Importer

https://docs.github.com/zh/actions/migrating-to-github-actions/automating-migration-with-github-actions-importer



故障排除

https://docs.github.com/zh/actions/monitoring-and-troubleshooting-workflows/about-monitoring-and-troubleshooting





github托管

https://docs.github.com/zh/actions/using-github-hosted-runners/about-github-hosted-runners

自托管

https://docs.github.com/zh/actions/hosting-your-own-runners/about-self-hosted-runners





安全指南

https://docs.github.com/zh/actions/security-guides/security-hardening-for-github-actions



自定义操作

https://docs.github.com/zh/actions/creating-actions/about-custom-actions
