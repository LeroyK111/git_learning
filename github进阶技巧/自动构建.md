# è‡ªåŠ¨é›†æˆ

https://docs.github.com/zh/actions

githubæä¾›äº‘ç«¯çš„è‡ªåŠ¨é›†æˆé…ç½®ã€‚

è‡ªåŠ¨æ„å»ºbuild ï¼Œè‡ªåŠ¨æµ‹è¯•testï¼Œè‡ªåŠ¨éƒ¨ç½²server updateï¼Œå®¹å™¨é•œåƒmirrorï¼Œå‘å¸ƒPackagesï¼Œé¡¹ç›®ç®¡ç†wikeã€‚

## å¿«é€Ÿå…¥é—¨

1.é¦–å…ˆåˆ›å»ºä¸€ä¸ªgithubä»“åº“ï¼Œå¹¶æ‹‰å–åˆ°æœ¬åœ°ã€‚ï¼ˆå…¶å®å¯ä»¥åœ¨çº¿æ“ä½œã€‚ã€‚ã€‚ï¼‰

```
$ git clone git@github.com:LeroyK111/gitAutoCommit.git
```

2.åˆ›å»ºå·¥ä½œæµæ–‡ä»¶å¤¹

åˆ›å»º gitAutoCommit/.github/workflows æ–‡ä»¶å¤¹ï¼Œå†™å…¥ä¸€ä¸ª github-actions-demo.yml é…ç½®æ–‡ä»¶ã€‚

![image-20230129152634709](%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA.assets/image-20230129152634709.png)

### **ç®€å•æ¡ˆä¾‹**

å†™å®Œåï¼Œè®°å¾—æäº¤æµ‹è¯•ä¸€ä¸‹ã€‚

```
# å·¥ä½œæµåç§°
name: GitHub Actions Demo
# å·¥ä½œæµè¿è¡Œåç§°
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
# ç›‘å¬äº‹ä»¶ï¼ˆå¿…é¡»ï¼‰
on: [push]
# ä½œä¸šç»†èŠ‚
jobs:
  # å®šä¹‰ä¸€ä¸ªä½œä¸šåç§°
  Explore-GitHub-Actions:
    # è®¾ç½®è¿è¡Œç¯å¢ƒ
    runs-on: ubuntu-latest
    # linuxæŒ‡ä»¤æ­¥éª¤
    steps:
    # run: shellæŒ‡ä»¤ã€‚ã€‚ã€‚
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
     # ç»™ä¸‹ä¸€è¡Œæ“ä½œèµ·ä¸ªåå­—
      - name: Check out repository code
     # uses: ç­¾å‡ºæ“ä½œï¼Œå¾ˆé‡è¦ã€‚å¦‚æœä½ è¦æ‰§è¡Œå­˜å‚¨åº“çš„è„šæœ¬orä¿®æ”¹å†…å®¹
        uses: actions/checkout@v3
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
     # ç»™ä¸‹ä¸€è¡Œæ“ä½œèµ·ä¸ªåå­—
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "ğŸ This job's status is ${{ job.status }}."
```

eventäº‹ä»¶æœºåˆ¶ï¼š

![å·¥ä½œæµæ¦‚è¿°](%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA.assets/overview-actions-simple.png)



### å·¥ä½œæµworkflows

å·¥ä½œæµç¨‹æ˜¯ä¸€ä¸ªå¯é…ç½®çš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼Œå®ƒå°†è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šã€‚ å·¥ä½œæµç¨‹ç”±ç­¾å…¥åˆ°å­˜å‚¨åº“çš„ YAML æ–‡ä»¶å®šä¹‰ï¼Œå¹¶åœ¨å­˜å‚¨åº“ä¸­çš„äº‹ä»¶è§¦å‘æ—¶è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼Œæˆ–æŒ‰å®šä¹‰çš„æ—¶é—´è¡¨è§¦å‘ã€‚

å·¥ä½œæµç¨‹åœ¨å­˜å‚¨åº“çš„ `.github/workflows` ç›®å½•ä¸­å®šä¹‰ï¼Œå­˜å‚¨åº“å¯ä»¥æœ‰å¤šä¸ªå·¥ä½œæµç¨‹ï¼Œæ¯ä¸ªå·¥ä½œæµç¨‹éƒ½å¯ä»¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡é›†ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æœ‰ä¸€ä¸ªå·¥ä½œæµç¨‹æ¥æ„å»ºå’Œæµ‹è¯•æ‹‰å–è¯·æ±‚ï¼Œå¦ä¸€ä¸ªå·¥ä½œæµç¨‹ç”¨äºåœ¨æ¯æ¬¡åˆ›å»ºå‘å¸ƒæ—¶éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œè¿˜æœ‰ä¸€ä¸ªå·¥ä½œæµç¨‹åœ¨æ¯æ¬¡æœ‰äººæ‰“å¼€æ–°è®®é¢˜æ—¶æ·»åŠ æ ‡ç­¾ã€‚

å¯åœ¨ä¸€ä¸ªå·¥ä½œæµä¸­å¼•ç”¨å¦ä¸€ä¸ªå·¥ä½œæµï¼Œè¯¦è§â€œ[é‡ç”¨å·¥ä½œæµ](https://docs.github.com/zh/actions/learn-github-actions/reusing-workflows)â€ã€‚

æœ‰å…³å·¥ä½œæµçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ[ä½¿ç”¨å·¥ä½œæµ](https://docs.github.com/zh/actions/using-workflows)â€ã€‚











### äº‹ä»¶Event

äº‹ä»¶æ˜¯å­˜å‚¨åº“ä¸­è§¦å‘å·¥ä½œæµç¨‹è¿è¡Œçš„ç‰¹å®šæ´»åŠ¨ã€‚ ä¾‹å¦‚ï¼Œå½“æœ‰äººåˆ›å»ºæ‹‰å–è¯·æ±‚ã€æ‰“å¼€è®®é¢˜æˆ–å°†æäº¤æ¨é€åˆ°å­˜å‚¨åº“æ—¶ï¼Œæ´»åŠ¨å¯èƒ½æºè‡ª GitHubã€‚ è¿˜å¯é€šè¿‡[å‘å¸ƒåˆ° REST API](https://docs.github.com/zh/rest/reference/repos#create-a-repository-dispatch-event) è§¦å‘æŒ‰è®¡åˆ’è¿è¡Œçš„å·¥ä½œæµï¼Œæˆ–è€…æ‰‹åŠ¨è§¦å‘ã€‚

æœ‰å…³å¯ç”¨äºè§¦å‘å·¥ä½œæµçš„äº‹ä»¶çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…[è§¦å‘å·¥ä½œæµçš„äº‹ä»¶](https://docs.github.com/zh/actions/reference/events-that-trigger-workflows)ã€‚



### ä½œä¸šshell

ä½œä¸šæ˜¯å·¥ä½œæµä¸­åœ¨åŒä¸€è¿è¡Œå™¨ä¸Šæ‰§è¡Œçš„ä¸€ç»„æ­¥éª¤ã€‚ æ¯ä¸ªæ­¥éª¤è¦ä¹ˆæ˜¯ä¸€ä¸ªå°†è¦æ‰§è¡Œçš„ shell è„šæœ¬ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªå°†è¦è¿è¡Œçš„åŠ¨ä½œã€‚ æ­¥éª¤æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”ç›¸äº’ä¾èµ–ã€‚ ç”±äºæ¯ä¸ªæ­¥éª¤éƒ½åœ¨åŒä¸€è¿è¡Œå™¨ä¸Šæ‰§è¡Œï¼Œå› æ­¤æ‚¨å¯ä»¥å°†æ•°æ®ä»ä¸€ä¸ªæ­¥éª¤å…±äº«åˆ°å¦ä¸€ä¸ªæ­¥éª¤ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªç”Ÿæˆåº”ç”¨ç¨‹åºçš„æ­¥éª¤ï¼Œåè·Ÿä¸€ä¸ªæµ‹è¯•å·²ç”Ÿæˆåº”ç”¨ç¨‹åºçš„æ­¥éª¤ã€‚

æ‚¨å¯ä»¥é…ç½®ä½œä¸šä¸å…¶ä»–ä½œä¸šçš„ä¾èµ–å…³ç³»ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œä½œä¸šæ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”å½¼æ­¤å¹¶è¡Œè¿è¡Œã€‚ å½“ä¸€ä¸ªä½œä¸šä¾èµ–äºå¦ä¸€ä¸ªä½œä¸šæ—¶ï¼Œå®ƒå°†ç­‰å¾…ä»å±ä½œä¸šå®Œæˆï¼Œç„¶åæ‰èƒ½è¿è¡Œã€‚ ä¾‹å¦‚ï¼Œå¯¹äºæ²¡æœ‰ä¾èµ–å…³ç³»çš„ä¸åŒä½“ç³»ç»“æ„ï¼Œæ‚¨å¯èƒ½æœ‰å¤šä¸ªç”Ÿæˆä½œä¸šï¼Œä»¥åŠä¸€ä¸ªä¾èµ–äºè¿™äº›ä½œä¸šçš„æ‰“åŒ…ä½œä¸šã€‚ ç”Ÿæˆä½œä¸šå°†å¹¶è¡Œè¿è¡Œï¼Œå½“å®ƒä»¬å…¨éƒ¨æˆåŠŸå®Œæˆåï¼Œæ‰“åŒ…ä½œä¸šå°†è¿è¡Œã€‚

æœ‰å…³ä½œä¸šçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ[ä½¿ç”¨ä½œä¸š](https://docs.github.com/zh/actions/using-jobs)â€ã€‚



### æ“ä½œ

æ“ä½œæ˜¯ç”¨äº GitHub Actions å¹³å°çš„è‡ªå®šä¹‰åº”ç”¨ç¨‹åºï¼Œå®ƒæ‰§è¡Œå¤æ‚ä½†ç»å¸¸é‡å¤çš„ä»»åŠ¡ã€‚ ä½¿ç”¨æ“ä½œå¯å¸®åŠ©å‡å°‘åœ¨å·¥ä½œæµç¨‹æ–‡ä»¶ä¸­ç¼–å†™çš„é‡å¤ä»£ç é‡ã€‚ æ“ä½œå¯ä»¥ä» GitHub æ‹‰å– git å­˜å‚¨åº“ï¼Œä¸ºæ‚¨çš„æ„å»ºç¯å¢ƒè®¾ç½®æ­£ç¡®çš„å·¥å…·é“¾ï¼Œæˆ–è®¾ç½®å¯¹äº‘æä¾›å•†çš„èº«ä»½éªŒè¯ã€‚

æ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„æ“ä½œï¼Œä¹Ÿå¯ä»¥åœ¨ GitHub Marketplace ä¸­æ‰¾åˆ°è¦åœ¨å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨çš„æ“ä½œã€‚

æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ[åˆ›å»ºæ“ä½œ](https://docs.github.com/zh/actions/creating-actions)â€ã€‚



### è¿è¡Œç¨‹åº

è¿è¡Œç¨‹åºæ˜¯è§¦å‘å·¥ä½œæµæ—¶è¿è¡Œå·¥ä½œæµçš„æœåŠ¡å™¨ã€‚ æ¯ä¸ªè¿è¡Œå™¨ä¸€æ¬¡å¯ä»¥è¿è¡Œä¸€ä¸ªä½œä¸šã€‚ GitHub æä¾› Ubuntu Linuxã€Microsoft Windows å’Œ macOS è¿è¡Œå™¨æ¥è¿è¡Œæ‚¨çš„å·¥ä½œæµç¨‹ï¼›æ¯ä¸ªå·¥ä½œæµç¨‹è¿è¡Œéƒ½åœ¨æ–°é¢„é…çš„å…¨æ–°è™šæ‹Ÿæœºä¸­æ‰§è¡Œã€‚ GitHub è¿˜æä¾› larger runnerï¼ˆé€‚ç”¨äºå¤§å‹é…ç½®ï¼‰ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ[ä½¿ç”¨ larger runner](https://docs.github.com/zh/actions/using-github-hosted-runners/using-larger-runners)â€ã€‚ å¦‚æœéœ€è¦å…¶ä»–æ“ä½œç³»ç»Ÿæˆ–ç‰¹å®šç¡¬ä»¶é…ç½®ï¼Œå¯æ‰˜ç®¡è‡ªå·±çš„è¿è¡Œå™¨ã€‚æœ‰å…³è‡ªæ‰˜ç®¡è¿è¡Œå™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ[æ‰˜ç®¡è‡ªå·±çš„è¿è¡Œå™¨](https://docs.github.com/zh/actions/hosting-your-own-runners)â€ã€‚





## è¿›é˜¶ä½¿ç”¨









## å…¶ä»–åŠŸèƒ½

å¹³å°è¿ç§»Actions Importer

https://docs.github.com/zh/actions/migrating-to-github-actions/automating-migration-with-github-actions-importer



æ•…éšœæ’é™¤

https://docs.github.com/zh/actions/monitoring-and-troubleshooting-workflows/about-monitoring-and-troubleshooting





githubæ‰˜ç®¡

https://docs.github.com/zh/actions/using-github-hosted-runners/about-github-hosted-runners

è‡ªæ‰˜ç®¡

https://docs.github.com/zh/actions/hosting-your-own-runners/about-self-hosted-runners





å®‰å…¨æŒ‡å—

https://docs.github.com/zh/actions/security-guides/security-hardening-for-github-actions



è‡ªå®šä¹‰æ“ä½œ

https://docs.github.com/zh/actions/creating-actions/about-custom-actions
